name: main
on:
  push:
  pull_request:
  schedule:
    - cron: "0 0 1 * *"
jobs:
  ubuntu:
    runs-on: ubuntu-latest
    container: ubuntu:focal
    steps:
    - uses: actions/checkout@v3
    - run: |
        apt-get -qq update
        apt-get -qq install curl grep lsof sed tar openjdk-17-jre-headless
    - run: |
        sh install.sh
        echo "# Log"
        echo
        cat ~/activemq-artemis-install.log | sed 's/^/  /'
  macos:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-java@v3
      with:
        distribution: 'temurin' # See 'Supported distributions' for available options
        java-version: '17'
    - run: |
        sh install.sh || :
        echo "# Log"
        echo
        cat ~/activemq-artemis-install.log | sed 's/^/  /'
